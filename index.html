<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Captcha Earning System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            max-width: 600px;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        input, button {
            margin: 5px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
        }
        button:hover {
            background-color: #45a049;
        }
        h1, h2 {
            color: #333;
        }
        #captchaContainer, #balanceContainer {
            display: none;
            margin-top: 20px;
        }
        #withdrawHistory {
            text-align: left;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Captcha Earning System</h1>
        <div id="loginSection">
            <h2>Login</h2>
            <form id="loginForm">
                <input type="text" id="loginUsername" placeholder="Username" required>
                <input type="password" id="loginPassword" placeholder="Password" required>
                <button type="submit">Login</button>
            </form>
            <p>Don't have an account? <a href="#" id="showRegister">Register here</a></p>
        </div>
        <div id="registerSection" style="display: none;">
            <h2>Register</h2>
            <form id="registerForm">
                <input type="text" id="registerUsername" placeholder="Username" required>
                <input type="password" id="registerPassword" placeholder="Password" required>
                <button type="submit">Register</button>
            </form>
            <p>Already have an account? <a href="#" id="showLogin">Login here</a></p>
        </div>
        <div id="captchaContainer" style="display: none;">
            <p id="registeredEmail"></p>
            <h2>Enter Captcha</h2>
            <img src="" id="captchaImage" alt="Captcha">
            <input type="text" id="captchaInput" placeholder="Enter Captcha">
            <button onclick="solveCaptcha()">Submit</button>
        </div>
        <div id="balanceContainer" style="display: none;">
            <h2>Your Balance: ₹<span id="balance">0</span></h2>
            <button onclick="withdraw()">Withdraw</button>
            <input type="text" id="upiInput" placeholder="Enter UPI ID">
            <input type="number" id="withdrawAmount" placeholder="Enter Amount (min ₹500)">
            <button onclick="confirmWithdraw()">Confirm Withdrawal</button>
            <div id="withdrawHistory">
                <h3>Withdrawal History</h3>
                <ul id="withdrawList"></ul>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const loginSection = document.getElementById('loginSection');
            const registerSection = document.getElementById('registerSection');
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const captchaContainer = document.getElementById('captchaContainer');
            const balanceContainer = document.getElementById('balanceContainer');
            const balanceDisplay = document.getElementById('balance');
            const registeredEmail = document.getElementById('registeredEmail');
            const withdrawList = document.getElementById('withdrawList');
            let currentUser = null;

            // Check if user is already logged in
            const loggedInUser = localStorage.getItem('loggedInUser');
            if (loggedInUser) {
                currentUser = JSON.parse(loggedInUser);
                showBalanceSection(currentUser);
            } else {
                showLoginSection();
            }

            // Function to show login section
            function showLoginSection() {
                loginSection.style.display = 'block';
                registerSection.style.display = 'none';
                captchaContainer.style.display = 'none';
                balanceContainer.style.display = 'none';
            }

            // Function to show register section
            function showRegisterSection() {
                loginSection.style.display = 'none';
                registerSection.style.display = 'block';
                captchaContainer.style.display = 'none';
                balanceContainer.style.display = 'none';
            }

            // Switch between login and register forms
            document.getElementById('showRegister').addEventListener('click', function(event) {
                event.preventDefault();
                showRegisterSection();
            });

            document.getElementById('showLogin').addEventListener('click', function(event) {
                event.preventDefault();
                showLoginSection();
            });

            // Register Form Submission
            registerForm.addEventListener('submit', function(event) {
                event.preventDefault();
                const username = document.getElementById('registerUsername').value;
                const password = document.getElementById('registerPassword').value;

                // Check if username already exists
                if (localStorage.getItem(username)) {
                    alert('Username already exists. Please choose another one.');
                } else {
                    // Store user in local storage
                    localStorage.setItem(username, JSON.stringify({ password: password, balance: 0, upi: '', email: username + '@example.com', withdrawHistory: [] }));
                    alert('Registration successful. Please login.');
                    showLoginSection();
                }
            });

            // Login Form Submission
            loginForm.addEventListener('submit', function(event) {
                event.preventDefault();
                const username = document.getElementById('loginUsername').value;
                const password = document.getElementById('loginPassword').value;

                // Check if user exists in local storage
                const userData = JSON.parse(localStorage.getItem(username));
                if (userData && userData.password === password) {
                    currentUser = { username: username };
                    localStorage.setItem('loggedInUser', JSON.stringify(currentUser));
                    showCaptchaSection();
                } else {
                    alert('Invalid username or password.');
                }
            });

            // Function to show captcha section
            function showCaptchaSection() {
                const userData = JSON.parse(localStorage.getItem(currentUser.username));
                registeredEmail.textContent = `Registered Email: ${userData.email}`;
                loginSection.style.display = 'none';
                registerSection.style.display = 'none';
                captchaContainer.style.display = 'block';
                balanceContainer.style.display = 'none';
                generateCaptcha();
            }

            // Function to generate random captcha (simulation)
            function generateCaptcha() {
                const captchaImage = document.getElementById('captchaImage');
                const captchaInput = document.getElementById('captchaInput');
                const randomCaptcha = Math.random().toString(36).slice(2, 8);
                captchaImage.src = `https://dummyimage.com/150x50/000/fff&text=${randomCaptcha}`;
                captchaInput.value = '';
            }

            // Function to solve captcha
            window.solveCaptcha = function() {
                const captchaInput = document.getElementById('captchaInput').value;
                if (captchaInput.trim() !== '') {
                    // Simulate captcha solving (replace with actual logic)
                    const captchaPassed = Math.random() < 0.5; // Simulate 50% success rate
                    if (captchaPassed) {
                        const userData = JSON.parse(localStorage.getItem(currentUser.username));
                        alert('Captcha solved successfully!');
                        showBalanceSection(userData);
                    } else {
                        alert('Captcha failed. Please try again.');
                        generateCaptcha();
                    }
                } else {
                    alert('Please enter captcha.');
                }
            }

            // Function to show balance section
            function showBalanceSection(user) {
                const userData = JSON.parse(localStorage.getItem(user.username));
                balanceDisplay.textContent = userData.balance;
                loginSection.style.display = 'none';
                registerSection.style.display = 'none';
                captchaContainer.style.display = 'none';
                balanceContainer.style.display = 'block';
                updateWithdrawHistory(user);
            }

            // Function to update withdraw history
            function updateWithdrawHistory(user) {
                const userData = JSON.parse(localStorage.getItem(user.username));
                withdrawList.innerHTML = '';
                userData.withdrawHistory.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = `Withdrawn ₹${item.amount} to UPI: ${item.upi}`;
                    withdrawList.appendChild(li);
                });
            }

            // Function to withdraw amount
            window.withdraw = function() {
                const upiInput = document.getElementById('upiInput').value;
                const withdrawAmount = parseInt(document.getElementById('withdrawAmount').value);
                const userData = JSON.parse(localStorage.getItem(currentUser.username));
                if (upiInput.trim() !== '' && withdrawAmount >= 500 && withdrawAmount <= userData.balance) {
                    userData.balance -= withdrawAmount;
                    userData.withdrawHistory.push({ amount: withdrawAmount, upi: upiInput });
                    localStorage.setItem(currentUser.username, JSON.stringify(userData));
                                         alert(`Withdrawal request of ₹${withdrawAmount} sent to UPI: ${upiInput}`);
                    balanceDisplay.textContent = userData.balance;
                    updateWithdrawHistory(currentUser);
                } else {
                    alert('Invalid withdrawal request. Check amount or UPI ID.');
                }
            }

            // Function to confirm withdrawal
            window.confirmWithdraw = function() {
                const withdrawAmount = parseInt(document.getElementById('withdrawAmount').value);
                const userData = JSON.parse(localStorage.getItem(currentUser.username));
                if (withdrawAmount < 500) {
                    alert('Minimum withdrawal amount is ₹500.');
                } else {
                    // Display confirmation dialog (would be replaced with actual UPI transaction logic)
                    const confirmWithdrawal = confirm(`Confirm withdrawal of ₹${withdrawAmount} to your UPI?`);
                    if (confirmWithdrawal) {
                        withdraw();
                    }
                }
            }
        });
    </script>
</body>
</html>                                                   
